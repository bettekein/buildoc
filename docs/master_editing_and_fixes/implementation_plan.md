# 実装計画: マスターデータ編集機能と修正

## 概要
マスターデータ（スタッフ、車両、工具、顧客）の編集機能を実装し、テナント管理のUI修正を行う。
さらに、案件（プロジェクト）情報自体の編集機能を追加する。

## 実装詳細

### 1. マスターデータの編集機能 (`Livewire/Masters/*`, `Livewire/Customers/Manager`)
- **共通ロジック**:
    - `edit($id)` メソッドを追加し、対象のデータを取得してプロパティにセット、モーダルを表示する。
    - `save()` メソッドを更新し、IDが存在する場合は `update`、存在しない場合は `create` を行うように分岐。
    - 保存後はフォームとIDをリセットする。
- **ビュー (`blade.php`)**:
    - 一覧テーブルのアクション列に「編集」ボタンを追加。
    - モーダルのタイトルを「新規登録」/「編集」で切り替える。
    - 保存ボタンのテキストを「登録」/「更新」で切り替える。

### 2. テナント管理の修正 (`Livewire/Admin/TenantManager`)
- キャンセル時にフォームの内容とエラーメッセージをリセットする `cancel()` メソッドを実装。
- モーダルの背景クリックとキャンセルボタンに `wire:click="cancel"` を適用。

### 3. 案件情報の編集 (`Livewire/Projects/Edit`)
- 案件作成コンポーネントをベースに、編集用コンポーネント `Edit.php` を作成。
- `mount(Project $project)` で初期値をロード。
- ルーティング `/projects/{project}/edit` を追加。
- `Config/breadcrumbs.php` にパンくずリスト定義を追加（`projects.edit`）。
- 案件一覧画面 (`ProjectQuotations`) に「編集」ボタンを追加。

## 技術的考慮事項
- **バリデーション**: 作成時と更新時で同じルールを適用するが、ユニーク制約がある場合はID除外を考慮する（今回は単純なCRUDのため既存ルールで対応）。
- **パンくずリスト**: `diglactic/laravel-breadcrumbs` を使用しているため、新しいルート定義時にはパンくずの設定を忘れないようにする（500エラー防止）。
